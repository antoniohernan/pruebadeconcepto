
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Un informático de siempre… en estos tiempos modernos">
      
      
      
        <link rel="canonical" href="https://pruebadeconcepto.es/rpi/rpi_apendice1/">
      
      
        <link rel="prev" href="../rpi_alternativas/">
      
      
        <link rel="next" href="../rpi_apendice2/">
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.14">
    
    
      
        <title>Instalando una RaspberryPI todo uso… en 2014 (parte 15) – Apéndice I - Prueba de Concepto</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#reiniciar-nuestro-router" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Prueba de Concepto" class="md-header__button md-logo" aria-label="Prueba de Concepto" data-md-component="logo">
      
  <img src="../../images/logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prueba de Concepto
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Instalando una RaspberryPI todo uso… en 2014 (parte 15) – Apéndice I
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
            
              <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Inicio
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../gen/gen_hello-world/" class="md-tabs__link">
        Generales
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../infov/infv_guybrush/" class="md-tabs__link">
        Informática Viejuna
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tec/tec_blogawsparte1/" class="md-tabs__link">
        Tecnología
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../tips/tip_sumaconawk/" class="md-tabs__link">
        Chuletas
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../rpi_intro/" class="md-tabs__link md-tabs__link--active">
        RaspberryPi
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../3dp/3d_anetet4pro/" class="md-tabs__link">
        Impresión 3D
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../about/about_acercademi/" class="md-tabs__link">
        Acerca de
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Prueba de Concepto" class="md-nav__button md-logo" aria-label="Prueba de Concepto" data-md-component="logo">
      
  <img src="../../images/logo_white.png" alt="logo">

    </a>
    Prueba de Concepto
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Inicio
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Generales
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Generales
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gen/gen_hello-world/" class="md-nav__link">
        Hola mundo!!
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Informática Viejuna
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Informática Viejuna
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_guybrush/" class="md-nav__link">
        ¡Hola! Me llamo Guybrush Threepwood, ¡y quiero ser un pirata!
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_discossd/" class="md-nav__link">
        ¿Y esto tiene discos SSD?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_cpdcuarto/" class="md-nav__link">
        Erase una vez... un CPD en un cuarto escobero
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_diagramasflujo/" class="md-nav__link">
        Diagramas de flujo e ISO 5807
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_eleccionesrancias/" class="md-nav__link">
        Elecciones del siglo 21, que ya va tocando
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_hilosethernet/" class="md-nav__link">
        ¿Quien mueve los hilos?? (de mi ethernet)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_mirrorpublicos/" class="md-nav__link">
        Mirror para todos los públicos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infov/infv_tarifaplanaya/" class="md-nav__link">
        Tarifa plana YA!!
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Tecnología
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tecnología
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_blogawsparte1/" class="md-nav__link">
        Monta tu blog en AWS por 0€ – parte 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_blogawsparte2/" class="md-nav__link">
        Monta tu blog en AWS por 0€ – parte 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_actionsec2/" class="md-nav__link">
        Envía ficheros desde Github a EC2 con actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_arduinoconfinado/" class="md-nav__link">
        Un poco de Arduino para pasar el confinamiento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_route53ssl/" class="md-nav__link">
        AWS Route53 como DNS dinámico y Certificado SSL LetsEncrypt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_monbasicagrafana/" class="md-nav__link">
        Monitorización básica con Grafana + InfluxDB + CollectD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_githubactions/" class="md-nav__link">
        Github Actions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tec/tec_bloqueartor/" class="md-nav__link">
        Bloquear red TOR en nuestro Apache y otras medida preventivas
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Chuletas
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Chuletas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_sumaconawk/" class="md-nav__link">
        Chuleta 00 Sumar con AWK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_utilesansible/" class="md-nav__link">
        Chuleta 01 Comandos útiles con ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_rescatadored/" class="md-nav__link">
        Chuleta 02 Rescantando de la red
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_vaciandoonenote/" class="md-nav__link">
        Chuleta 03 Vaciando OneNote
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_segundoplano/" class="md-nav__link">
        Chuleta 04 Trabajando con el segundo plano
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_journal/" class="md-nav__link">
        Chuleta 05 Journal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tips/tip_ficheroexiste/" class="md-nav__link">
        Chuleta 06 ¿El fichero existe?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          RaspberryPi
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          RaspberryPi
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_intro/" class="md-nav__link">
        Introducción
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_install_i/" class="md-nav__link">
        Instalación Básica I
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_install_ii/" class="md-nav__link">
        Instalación Básica II
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_securizacion/" class="md-nav__link">
        Securización
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_backup/" class="md-nav__link">
        Copias de Seguridad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_wordpress1/" class="md-nav__link">
        Práctico 1 - Wordpress 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_wordpress2/" class="md-nav__link">
        Práctico 1 - Wordpress 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_downmanager/" class="md-nav__link">
        Práctico 2 - Gestor de Descargas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_airprint/" class="md-nav__link">
        Práctico 3 - Servidor Impresión/AirPrint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_backupserver/" class="md-nav__link">
        Práctico 4 - Servidor Copias de Seguridad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_domotica/" class="md-nav__link">
        Práctico 5 - Domótica, Cámaras IP y RaZberry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_mediacenter/" class="md-nav__link">
        Práctico 6 - Media Center
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_emulador/" class="md-nav__link">
        Práctico 7 - Emulación de juegos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_alternativas/" class="md-nav__link">
        Alternativas a RPi
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Apéndices (I) - Reinicio de router
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Apéndices (I) - Reinicio de router
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reiniciar-nuestro-router" class="md-nav__link">
    Reiniciar nuestro router
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validamos-nuestra-conexion" class="md-nav__link">
    Validamos nuestra conexión
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_apendice2/" class="md-nav__link">
        Apéndices (II) - XBMC con MariaDB para BBDD distribuida
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rpi_apendice3/" class="md-nav__link">
        Apéndices (III) - Administración con Webmin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Impresión 3D
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Impresión 3D
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3dp/3d_anetet4pro/" class="md-nav__link">
        Impresora 3D
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3dp/3d_niveladocama/" class="md-nav__link">
        Nivelando la cama caliente
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../3dp/3d_piederey/" class="md-nav__link">
        Uso del calibre o pie de rey
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Acerca de
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Acerca de
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/about_acercademi/" class="md-nav__link">
        Acerca de mi y mis pruebas de concepto
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../about/about_privacy-policy/" class="md-nav__link">
        Política de privacidad
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reiniciar-nuestro-router" class="md-nav__link">
    Reiniciar nuestro router
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validamos-nuestra-conexion" class="md-nav__link">
    Validamos nuestra conexión
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Apéndices (I) - Reinicio de router</h1>

<h2 id="reiniciar-nuestro-router">Reiniciar nuestro router<a class="headerlink" href="#reiniciar-nuestro-router" title="Permanent link">&para;</a></h2>
<p>Me ha pasado alguna vez que me encuentro el router de casa tostado.</p>
<p>Da igual el modelo y el tipo de conectividad porqué me ha pasado siempre, con ADSL, con Fibra, routers buenos y no tan buenos, etc.</p>
<p>Todos se bloquean tarde o temprano, porqué pierden el sincronismo con la línea, porqué se les llena la tabla de NAT... mil cosas.</p>
<p>Os cuento como podemos reiniciar el router usando para ello nuestra RPI, claro está, el router tiene que estar sin conexión al exterior pero debe seguir sirviendo la LAN por ethernet, de otra manera no tenemos nada ya que el router estaría en un estado catatónico y para eso no existe otra solución que la intervención humana y apagar/encender.</p>
<p>Todos los routers, o la mayoría, tiene habilitado el protocolo para poder realizar conexiones por <a href="http://es.wikipedia.org/wiki/Telnet">TELNET</a> , <strong>son conexiones no segueras ya que la información viaja en "plano",</strong> no hay capa de cifrado.</p>
<p>Pero no pasa nada (o casi nada) ya que esta conexión sólo está disponible en la red interna, en nuestra LAN, no es posible acceder desde fuera.</p>
<p>Lo primero que tenemos que hacer es, por un lado mirar si este protocolo está habilitado en nuestro router, y en segundo lugar mirar cual es el comando de reinicio del mismo, que suele ser un comando al estilo <code>reboot</code></p>
<p>Sería algo más o menos como esto:</p>
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# telnet 192.168.1.1

Trying 192.168.1.1...
Connected to 192.168.1.1.
Escape character is &#39;^]&#39;.
BCM963268 Broadband Router
Login: USUARIOADMINISTRADOR
Password: CLAVEADMINISTRADOR
&gt; reboot
</code></pre></div>
<p>Como véis, en mi router, un VG8050 de FTTH el comando de reinicio es reboot.</p>
<p>Para adivinar el vuestro, cuando el router os de línea de comando, tendréis que teclear help y mirar los comandos disponibles, no será difícil, reboot, restart o similar.</p>
<p>Bien, pues ahora la parte que hacemos en la RPI, vamos a implementar un mecanismo por el que simulamos esta interacción con el router, de manera que lanzamos el comado de <code>telnet</code>, y luego vamos esperando cadenas de texto y enviamos más información según se nos pide.</p>
<p>Para esto utilizamos una maravilla llamada <a href="http://en.wikipedia.org/wiki/Expect">Expect</a> , que nos permite diseñar un script que haga esto que precisamente os cuento.</p>
<p>Lo instalamos como es habitual, con <code>pacman</code></p>
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# pacman -S expect

resolving dependencies...
looking for inter-conflicts...
Packages (2): tcl-8.6.1-1 expect-5.45-3
Total Download Size: 2.31 MiB
Total Installed Size: 6.54 MiB
:: Proceed with installation? [Y/n] Y
:: Retrieving packages ...
tcl-8.6.1-1-armv6h 2.1 MiB 2.16M/s       00:01 [###############################] 100%
expect-5.45-3-armv6h 162.8 KiB 465K/s    00:00 [###############################] 100%
(2/2) checking keys in keyring                 [################################] 100%
(2/2) checking package integrity               [################################] 100%
(2/2) loading package files                    [################################] 100%
(2/2) checking for file conflicts              [################################] 100%
(2/2) checking available disk space            [################################] 100%
(1/2) installing tcl                           [################################] 100%
(2/2) installing expect                        [################################] 100%
</code></pre></div>
<p>El script, al que yo he llamado <code>RebotaRouter.sh</code>tiene este contenido:</p>
<div class="highlight"><pre><span></span><code>#!/usr/bin/expect
spawn telnet 192.168.1.1
expect &quot;Login:&quot;
send USUARIOADMINISTRADOR
send &quot;\\r&quot;
expect &quot;Password:&quot;
send CLAVEADMINISTRADOR
send &quot;\\r&quot;
expect -exact &quot; &gt; &quot;
send &quot;reboot&quot;
send &quot;\\r&quot;
sleep 1
interact
exit
</code></pre></div>
<p>Tenemos que prestar atención a la IP de nuestro router (en mi caso 192.68.1.1), el usuario y clave que usamos para administrar el router por http, y el comando de reinicio (<code>reboot</code> en mi caso).</p>
<p>El código es bastate legible, espera esta cadena (<code>expect</code>) y manda esta otra (<code>send</code>).</p>
<p>Entre una y otra establece un retardo de 1 segunto (<code>sleep X</code> donde X es el número de segundos a esperar).</p>
<p>Tenemos que dar permisos de ejecución a este script</p>
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# chmod 700 RebotaRouter.sh
</code></pre></div>
<p>El permiso es 700, que es <code>-rwx------</code>, esto es, todos los permisos para el propietario y nada para otros y grupo, más que nada por que en ese fichero hemos puesto las credenciales de nuestro router al completo.</p>
<p>Salida de esta ejecución:</p>
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# ./rebota_router.sh

spawn telnet 192.168.1.1
Trying 192.168.1.1...
Connected to 192.168.1.1.
Escape character is &#39;^]&#39;.

BCM963268 Broadband Router
Login: USUARIOADMINISTRADOR
Password:
&gt; reboot

The system shell is being reset. Please wait...
&gt; Connection closed by foreign host.
</code></pre></div>
<p>Y ya estaría, el router se reinicia, lo primero es probar que esto es así y que os funciona esta primera parte.</p>
<h2 id="validamos-nuestra-conexion">Validamos nuestra conexión<a class="headerlink" href="#validamos-nuestra-conexion" title="Permanent link">&para;</a></h2>
<p>Ahora vamos a hacer otro script, el cual valida que tenemos conexión a internet, y para esto lo mejor es descargaralgo.</p>
<p>Para la descarga empleamos <code>wget</code> y nos bajamos una página que sabemos que existe, activamos el parámetro de reintentos a 5, que por defecto son 20 (muchos) y comprobamos el resultado de este comando.</p>
<p>Los comandos en <strong>Unx/Lnx</strong> siempre dan un retorno, <code>0</code> si todo va bien y <code>&gt;0</code> si hay algún problema.</p>
<p>Con la variable de entorno <code>$?</code> obtenemos el código de retorno del último comando que hemos ejecutado.</p>
<p>Sin más rollos, este es el script <code>RevisaRouter.sh</code></p>
<div class="highlight"><pre><span></span><code>#!/usr/bin/bash
# Comprobacion del estado de la conexion a internet / router tostado.

wget —tries=5 http://www.yahoo.com &gt; /dev/null 2&gt;&amp;1
if ! [ &quot;$?&quot; -eq 0 ]
then
 # No hay conexion a internet.
 # Reiniciamos el router
 /root/RebotaRouter.sh
 sleep 90 # esperamos 90 segundos al reinicio
 echo &quot;Envio Router Comtrend &quot; &gt; /root/router.txt
 echo &quot;Fecha: &quot; \`date &#39;+%d/%m/%Y %H:%M:%S&#39;\` &gt;&gt; /root/router.txt
 echo &quot;Reinicio de router&quot; &gt;&gt; /root/router.txt
 mutt -s &quot;Router&quot; tumail@gmail.com &lt; /root/router.txt
fi
rm -f /root/index.html &gt; /dev/null 2&gt;&amp;1
</code></pre></div>
<p>Como véis he puesto también una llamada a <code>mutt</code> que ya teníamos configurado de haberlo usado antes, para que nos notifique por mail que se ha producido un reinicio de la conexión.</p>
<p>Le damos permisos como antes:</p>
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# chmod 755 RevisaRouter.sh
</code></pre></div>
<p>Para probar que esto funciona, soltáis el cable de teléfono del router (ADSL) o apagáis la ONT (FTTH) y ejecutáis el scrip, las luces del router os indicarán que el reinicio se está produciendo.</p>
<p>Si queréis programarlo para que se ejecute cada cierto tiempo lo podéis incluir dentro de crontab
<div class="highlight"><pre><span></span><code>[root@Jarvis ~]# crontab -e

0,10,20,30,40,50 * * * * /root/RevisaRouter.sh
</code></pre></div></p>
<p>Con esa línea nueva en crontab el script se ejecutaría siempre cada 10 minutos.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019-2023 Antonio Hernan
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>